if("undefined"==typeof Int32Array)var Int32Array=Array;if("undefined"==typeof Common)var Common={};"undefined"==typeof Common.iStore&&(Common.iStore={});Common.iStore.iStoreConfig=function(){this.col=null;this.dummy=this.inner_height=this.inner_width=this.extern_height=this.extern_width=this.border_weight=this.title_row=this.row=0};Common.iStore.iStorePos=function(){this.height=this.width=this.y2=this.x2=this.y1=this.x1=0};Common.iStore.iStoreGrid=function(){this.cy=this.cx=this.y=this.x=0};
Common.iStore.iStoreSize=function(){this.border_height=this.border_width=this.height=this.width=0};Common.iStore.iStoreImageSize=function(){this.h=this.w=0};var Config=null,Config=Array(300);Config[0]=new Common.iStore.iStoreConfig;Config[0].col=new Int32Array(3);Config[0].col[0]=196;Config[0].col[1]=710;Config[0].col[2]=294;Config[0].row=50;Config[0].title_row=1;Config[0].border_weight=1;Config[0].extern_width=5;Config[0].extern_height=5;Config[0].inner_width=5;Config[0].inner_height=5;
Config[100]=new Common.iStore.iStoreConfig;Config[100].col=new Int32Array(1);Config[100].col[0]=640;Config[100].row=40;Config[100].title_row=2;Config[100].border_weight=0;Config[100].extern_width=0;Config[100].extern_height=5;Config[100].inner_width=10;Config[100].inner_height=5;
function csharp_grid_to_pos(a,b,c,g,k){for(var l=new Common.iStore.iStorePos,n=0,d=0,n=0;n<Config[a].col.length;n++)b==n&&(l.x1=d),b+g==n&&(l.x2=d-1),d+=Config[a].col[n];b>=Config[a].col.length&&(l.x1=d);b+g>=Config[a].col.length&&(l.x2=d-1);l.y1=c*Config[a].row;l.y2=(c+k)*Config[a].row-1;l.width=l.x2+1-l.x1;l.height=l.y2+1-l.y1;return l}
function csharp_pos_to_grid(a,b,c,g){for(var k=new Common.iStore.iStoreGrid,l=0,n=0,l=0;l<Config[a].col.length;l++)if(n+=Config[a].col[l],n>b){k.x=l;break}b>=n&&(k.x=0<g?Config[a].col.length-1:Config[a].col.length);k.y=0>=c?0:System.Math.Round$$Double(c/Config[a].row);return k}function csharp_get_max_grid_width(a){return Config[a].col.length}
function csharp_get_plugin_size(a,b,c,g,k){a=Config[a];var l=new Common.iStore.iStoreSize;if(3==g)l.border_width=b-2*(a.border_weight+a.extern_width),l.border_height=c-2*(a.border_weight+a.extern_height),l.width=b-2*(a.border_weight+a.extern_width+a.inner_width),l.height=c-(a.row*a.title_row+2*a.inner_height);else switch(k){case 0:l.border_width=b-2*a.extern_width;l.border_height=c-2*a.extern_height;l.width=b-2*a.extern_width;l.height=c-2*a.extern_height;break;case 1:l.border_width=b-2*(a.border_weight+
a.extern_width+a.inner_width);l.border_height=c-2*(a.border_weight+a.extern_height+a.inner_height);l.width=b-2*(a.border_weight+a.extern_width+a.inner_width);l.height=c-2*(a.border_weight+a.extern_height+a.inner_height);break;default:l.border_width=b-2*(a.border_weight+a.extern_width),l.border_height=c-2*(a.border_weight+a.extern_height),l.width=b-2*(a.border_weight+a.extern_width+a.inner_width),l.height=c-(a.row*a.title_row+2*a.inner_height)}return l}
function csharp_size_image_calc(a,b,c,g,k,l,n){var d=Array(10);a=csharp_get_plugin_size(a,b,c,g,k);var h=a.width,m=a.height;d[0]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h;a.h=m;return a}();d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=
0;a.h=0;return a}();d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();d[6]=function(){var a=new Common.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();d[7]=function(){var a=new Common.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();d[8]=function(){var a=new Common.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();d[9]=function(){var a=new Common.iStore.iStoreImageSize;a.w=0;a.h=0;return a}();var e,f;switch(l){case 1:d[1]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h;a.h=m;return a}();break;case 2:switch(n){case 0:e=System.Math.Floor$$Double((h-4)/3);f=System.Math.Floor$$Double(m-2);d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-4-2*e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-18)/3),f=System.Math.Floor$$Double(m-2),d[1]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=f;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-18-2*e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}()}break;case 3:switch(n){case 0:e=System.Math.Floor$$Double((h-3)/2);f=System.Math.Floor$$Double(0.4*(m-3));d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-2;a.h=m-f-3;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h-e-3;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-10)/2),f=System.Math.Floor$$Double(0.4*(m-10)),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-2;a.h=m-f-10;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-e-10;a.h=f;return a}()}break;case 4:switch(n){case 0:e=System.Math.Floor$$Double((h-3)/3);f=System.Math.Floor$$Double((m-4)/3);d[1]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h-3-e;a.h=m-2;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-4-2*f;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-10)/3),f=System.Math.Floor$$Double((m-18)/3),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-10-e;a.h=m-2;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-18-2*f;return a}(),d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}()}break;case 5:switch(n){case 0:e=System.Math.Floor$$Double((h-6)/5);f=System.Math.Floor$$Double(m-2);d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h-6-4*e;a.h=f;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-34)/5),f=System.Math.Floor$$Double(m-2),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-34-4*
e;a.h=f;return a}(),d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}()}break;case 6:switch(n){case 0:e=System.Math.Floor$$Double((h-5)/5);f=System.Math.Floor$$Double((m-3)/2);d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=
2*e+1;a.h=m-3-f;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-5-4*e;a.h=m-2;return a}();d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=2*e;a.h=f;return a}();d[6]=function(){var a=new Common.iStore.iStoreImageSize;a.w=2*e;a.h=m-3-f;return a}();break;case 1:e=System.Math.Floor$$Double((h-26)/5),f=System.Math.Floor$$Double((m-10)/2),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=2*e+8;a.h=m-10-f;return a}(),d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-26-4*e;a.h=m-2;return a}(),d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=2*e;a.h=f;return a}(),d[6]=function(){var a=new Common.iStore.iStoreImageSize;a.w=2*e;a.h=m-10-f;return a}()}break;case 7:switch(n){case 0:e=System.Math.Floor$$Double((h-3)/2);f=System.Math.Floor$$Double((m-5)/9);d[1]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h-2;a.h=m-3*f-5;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-e-3;a.h=f;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-e-3;a.h=f;return a}();d[6]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[7]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-
e-3;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-10)/2),f=System.Math.Floor$$Double((m-26)/9),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-2;a.h=m-3*f-26;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-e-10;a.h=f;return a}(),d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[5]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h-e-10;a.h=f;return a}(),d[6]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[7]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-e-10;a.h=f;return a}()}break;case 8:switch(n){case 0:e=System.Math.Floor$$Double((h-3)/2);f=System.Math.Floor$$Double((m-5)/4);d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-3-e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=m-5-3*f;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-3-e;a.h=m-5-3*f;return a}();d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[6]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-3-e;a.h=f;return a}();d[7]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[8]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-3-e;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-10)/2),f=
System.Math.Floor$$Double((m-26)/4),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-10-e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-26-3*f;return a}(),d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-10-e;a.h=m-26-3*f;return a}(),d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[6]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h-10-e;a.h=f;return a}(),d[7]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[8]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-10-e;a.h=f;return a}()}break;case 9:switch(n){case 0:e=System.Math.Floor$$Double((h-4)/3);f=System.Math.Floor$$Double((m-4)/3);d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-4-2*e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=f;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-4-2*f;return a}();d[5]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-4-2*e;a.h=m-4-2*f;return a}();d[6]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-4-2*f;return a}();d[7]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[8]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-4-2*e;a.h=f;return a}();d[9]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-18)/3),f=System.Math.Floor$$Double((m-18)/3),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-18-2*e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-18-2*f;return a}(),d[5]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h-18-2*e;a.h=m-18-2*f;return a}(),d[6]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-18-2*f;return a}(),d[7]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[8]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-18-2*e;a.h=f;return a}(),d[9]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}()}break;case 10:switch(n){case 0:e=System.Math.Floor$$Double((h-3)/2);f=System.Math.Floor$$Double(m-2);d[1]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=f;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-3-e;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-10)/2),f=System.Math.Floor$$Double(m-2),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-10-e;a.h=f;return a}()}break;case 11:switch(n){case 0:e=System.Math.Floor$$Double((h-5)/4);f=System.Math.Floor$$Double(m-2);d[1]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=f;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-5-3*e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();break;case 1:e=System.Math.Floor$$Double((h-26)/4),f=System.Math.Floor$$Double(m-2),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-26-3*
e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}()}break;case 12:case 13:switch(n){case 0:e=System.Math.Floor$$Double((h-3)/2);f=System.Math.Floor$$Double((m-3)/2);d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-3-e;a.h=m-2;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=m-3-f;return a}();break;case 1:e=System.Math.Floor$$Double((h-10)/2),f=System.Math.Floor$$Double((m-10)/2),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-10-e;a.h=m-2;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-10-f;return a}()}break;case 14:switch(n){case 0:e=System.Math.Floor$$Double((h-3)/2);f=System.Math.Floor$$Double((m-3)/2);d[1]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=e;a.h=f;return a}();d[2]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-3-e;a.h=f;return a}();d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-3-f;return a}();d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-3-e;a.h=m-3-f;return a}();break;case 1:e=System.Math.Floor$$Double((h-10)/2),f=System.Math.Floor$$Double((m-10)/2),d[1]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=f;return a}(),d[2]=function(){var a=new Common.iStore.iStoreImageSize;
a.w=h-10-e;a.h=f;return a}(),d[3]=function(){var a=new Common.iStore.iStoreImageSize;a.w=e;a.h=m-10-f;return a}(),d[4]=function(){var a=new Common.iStore.iStoreImageSize;a.w=h-10-e;a.h=m-10-f;return a}()}}return d};var iStorePluginConstant=function(){this.SHOW_MODE_DISPLAY=0;this.SHOW_MODE_EDIT=1;this.SHOW_MODE_PREVIEW=2;this.SHOW_MODE_STATIC=3},PluginConstant=new iStorePluginConstant;var iStorePlugin=function(a){var b=this,c={icon:"<div></div>",tools_bar:$("<div></div>"),page_id:0,plugin_type:-1,plugin_device:Constant.STORE_DEVICE_PC,containers:null,frame_config:Constant.ISTORE_FRAME_CONFIG_PC_STYLE0,show_mode:PluginConstant.SHOW_MODE_DISPLAY,grid_cx_min:1,grid_cy_min:1,grid_cx_max:-1,grid_cy_max:-1,grid_cx_init:1,grid_cy_init:1,tools_show_resize:!0,icon:null,content:null,on_get_right_size:null,on_get_parts_size:null,on_dropdown:null,on_show:null,on_setting:null,on_moved:null,
on_sized:null,on_sizing:null,on_remove:null,can_layout:!1,can_setting:!1};this.opts=$.extend({},c,a);this.link_type_info=null;this.plugin_type=this.opts.plugin_type;this.device=this.opts.plugin_device;this.frame_config=this.opts.frame_config;this.show_mode=this.opts.show_mode;this.layout_id=this.plugin_id=-1;this.grid_y=this.grid_x=0;this.grid_cy=this.grid_cx=1;this.is_new=!0;this.is_resizing=this.is_draging=!1;this.frame=$('<div type="plugin" ></div>').addClass("plugin_containers");this.body=$('<div style="width:100%;height:100%;"></div>');
this.body.appendTo(this.frame);this.icon=null;this.frame_border1=$('<div class="plugin_move_border1"></div>');this.frame_border2=$('<div class="plugin_move_border2"></div>');this.frame_border3=$('<div class="plugin_move_border3"></div>');this.frame_border4=$('<div class="plugin_move_border4"></div>');this.frame_remove=$('<div class="plugin_remove icon_del_drag"></div>');this.frame_border1.hide();this.frame_border2.hide();this.frame_border3.hide();this.frame_border4.hide();this.frame_remove.hide();
this.frame_border1.appendTo(this.frame);this.frame_border2.appendTo(this.frame);this.frame_border3.appendTo(this.frame);this.frame_border4.appendTo(this.frame);this.frame_remove.appendTo(this.frame);this.set_icon(this.opts.icon);this.set_content(this.opts.content);this.show_mode==PluginConstant.SHOW_MODE_EDIT&&this.opts.can_layout&&($(this.frame).draggable({cursor:"move",helper:"clone",addClasses:!1,zIndex:100,opacity:0.4,refreshPositions:!1,start:function(a,c){null!=b.frame&&b.frame.find(".plugin_touch").unbind("click",
plugin_setting);if(null!=b.opts.containers)b.opts.containers.on_move_start(b,a,c)},stop:function(a,c){if(null!=b.opts.containers)b.opts.containers.on_move_stop(b,a,c);setTimeout(function(){null!=b.frame&&b.frame.find(".plugin_touch").bind("click",b,plugin_setting)},100)},drag:function(a,c){if(null!=b.opts.containers)b.opts.containers.on_move_drag(b,a,c)}}),$('<div style="display:none;"></div>').addClass("plugin_touch").appendTo(this.frame),this.opts.tools_show_resize&&$(this.frame).resizable({autoHide:!0,
helper:"plugin_resizable_helper",start:function(a,c){if(null!=b.opts.containers)b.opts.containers.on_size_start(b,a,c)},stop:function(a,c){if(null!=b.opts.containers)b.opts.containers.on_size_stop(b,a,c)},resize:function(a,c){if(null!=b.opts.containers)b.opts.containers.on_size_resize(b,a,c)}}),this.frame_remove.click(function(){b.on_remove()}));this.body.hide()};
iStorePlugin.prototype={add_touch:function(){this.opts.can_layout&&($(this.frame).draggable("option","handle",".plugin_touch"),$(this.frame).draggable("option","cancel",".plugin_touch_cancel"));this.opts.can_setting&&this.frame.find(".plugin_touch").bind("click",this,plugin_setting)},remove:function(){this.frame.remove();this.frame=null},appendTo:function(a){this.frame.appendTo(a)},move:function(a,b,c,g){this.frame.css("position","absolute");this.frame.css("left",a+"px");this.frame.css("top",b+"px");
this.size(c,g)},size:function(a,b){this.frame.width(a);this.frame.height(b);this.body.width(a);this.body.height(b);this.frame_border1.width(0);this.frame_border1.height(b+4);this.frame_border2.width(a+4);this.frame_border2.height(0);this.frame_border3.width(0);this.frame_border3.height(b+4);this.frame_border4.width(a+4);this.frame_border4.height(0)},show:function(){this.frame.show()},hide:function(){this.frame.hide()},get_body:function(){return this.frame},get_right_size:function(a,b,c,g){if(null!=
this.opts.on_get_right_size)return this.opts.on_get_right_size(this,a,b,c,g);ret={};ret.cx=c;ret.cy=g;return ret},get_parts_size:function(a){if(null!=this.opts.on_get_parts_size)return this.opts.on_get_parts_size(this,a);ret={};ret.w=this.body.width();ret.h=this.body.height();return ret},set_content:function(a){null!=a&&(this.body.empty(),$(a).appendTo(this.body),this.show_mode==PluginConstant.SHOW_MODE_EDIT&&this.body.disableSelection())},set_icon:function(a){null!=this.icon&&$(this.icon).remove();
this.icon=$(a).appendTo(this.frame);this.icon.addClass("plugin_icon")},show_icon:function(){null!=this.icon&&($(this.icon).show(),$(this.frame).width($(this.icon).width()),$(this.frame).height($(this.icon).height()),this.body.hide(),this.frame_border1.hide(),this.frame_border2.hide(),this.frame_border3.hide(),this.frame_border4.hide(),this.frame_remove.hide());$(this).children(".ui-icon").hide();this.opts.can_layout&&this.opts.tools_show_resize&&$(this.frame).resizable("disable")},show_normal:function(){var a=
this;null!=this.icon&&$(this.icon).hide();this.body.show();this.show_mode==PluginConstant.SHOW_MODE_EDIT&&(this.frame.hover(function(){a.opts.can_layout||a.opts.can_setting?(a.frame_border1.show(),a.frame_border2.show(),a.frame_border3.show(),a.frame_border4.show()):(a.frame_border1.hide(),a.frame_border2.hide(),a.frame_border3.hide(),a.frame_border4.hide());a.opts.can_layout?a.frame_remove.show():a.frame_remove.hide();$(this).children(".ui-icon").show()},function(){a.frame_border1.hide();a.frame_border2.hide();
a.frame_border3.hide();a.frame_border4.hide();a.frame_remove.hide();$(this).children(".ui-icon").hide()}),this.opts.can_layout&&this.opts.tools_show_resize&&$(this.frame).resizable("enable"))},on_show:function(a){a?this.get_data():this.show_data()},on_dropdown:function(a,b,c){if(this.opts.can_layout&&null!=this.opts.on_dropdown)this.opts.on_dropdown(this,a,b,c)},on_moved:function(a,b){if(this.opts.can_layout&&null!=this.opts.on_moved)this.opts.on_moved(this,a,b)},on_sized:function(a,b){if(this.opts.can_layout&&
null!=this.opts.on_sized)this.opts.on_sized(this,a,b)},on_sizing:function(a,b){if(this.opts.can_layout&&null!=this.opts.on_sizing)this.opts.on_sizing(this,a,b)},on_remove:function(){if(this.opts.can_layout&&null!=this.opts.on_remove)this.opts.on_remove(this)},on_setting:function(){if(this.opts.can_setting&&null!=this.opts.on_setting)this.opts.on_setting(this)},show_data:function(){if(null!=this.data&&null!=this.opts.on_show)this.opts.on_show(this);this.show_mode==PluginConstant.SHOW_MODE_EDIT&&this.add_touch()},
get_data:function(){show_data()},get_store_link_type:function(a,b){var c=this;OpenLoadingDialog();$.ajax({url:c.opts.action_path.GetStoreLinkType,dataType:"json",contentType:"application/json",type:"POST",data:stringify({device:c.device}),success:function(b){CloseLoadingDialog();if(!0==b.success){c.link_type_info=b.link_type_info;c.link_type_info.StoreSalesRuleData=[];c.link_type_info.StoreSalesRuleData.push({Type:-1,Name:"\u5168\u90e8\u4fc3\u9500"});c.link_type_info.StoreSalesRuleData[0].Rule=[];
for(var k=0;k<c.link_type_info.StoreSalesRule.length;k++){c.link_type_info.StoreSalesRule[k].Displayinfo=get_sales_rule_displayinfo(c.link_type_info.StoreSalesRule[k]);c.link_type_info.StoreSalesRuleData[0].Rule.push(c.link_type_info.StoreSalesRule[k]);for(var l=!1,n=c.link_type_info.StoreSalesRule[k].Type,d=0;d<c.link_type_info.StoreSalesRuleData.length;d++)if(n==c.link_type_info.StoreSalesRuleData[d].Type){l=!0;c.link_type_info.StoreSalesRuleData[d].Rule.push(c.link_type_info.StoreSalesRule[k]);
break}if(!l){l="";switch(n){case Constant.SALESRULE_REDUCE:l="\u76f4\u964d";break;case Constant.SALESRULE_FULL_REDUCE:l="\u6ee1\u51cf";break;case Constant.SALESRULE_GROUP_BUY:l="\u56e2\u8d2d";break;case Constant.SALESRULE_PACK_BUY:l="\u7ec4\u5408\u8d2d\u4e70";break;case Constant.SALESRULE_SECKILLING:l="\u79d2\u6740";break;case Constant.SALESRULE_DEFINE:l="\u81ea\u5b9a\u4e49";break;case Constant.SALESRULE_DISCOUNT:l="\u6298\u6263"}c.link_type_info.StoreSalesRuleData.push({Type:n,Name:l});c.link_type_info.StoreSalesRuleData[c.link_type_info.StoreSalesRuleData.length-
1].Rule=[];c.link_type_info.StoreSalesRuleData[c.link_type_info.StoreSalesRuleData.length-1].Rule.push(c.link_type_info.StoreSalesRule[k])}}}else ShowActionError(b.error,c.opts.action_path.admin_type);null!=a&&a(b)},error:function(a,c,l){ShowAjaxError(a,c,l);null!=b&&b(data)}})},init_link_type:function(a,b){function c(){var b=a.find("#class1_select").find("option:selected").val();a.find("#class2_select").empty();a.find("#class3_select").empty();0<=b?(d.nav_class2=store_nav_data.store_nav.StoreNavClass1[b].StoreNavClass2,
$("#plugin_edit_dialog_class2_tmpl").tmpl(d).appendTo(a.find("#class2_select"))):$("#plugin_edit_dialog_class2_tmpl").tmpl(null).appendTo(a.find("#class2_select"));$("#plugin_edit_dialog_class3_tmpl").tmpl(null).appendTo(a.find("#class3_select"))}function g(){var b=a.find("#class1_select").find("option:selected").val(),c=a.find("#class2_select").find("option:selected").val();a.find("#class3_select").empty();0<=c?(d.nav_class3=store_nav_data.store_nav.StoreNavClass1[b].StoreNavClass2[c].StoreNavClass3,
$("#plugin_edit_dialog_class3_tmpl").tmpl(d).appendTo(a.find("#class3_select"))):$("#plugin_edit_dialog_class3_tmpl").tmpl(null).appendTo(a.find("#class3_select"))}function k(){var b=a.find("#link_param_sales_type").find("option:selected").val();null!=b&&0<=b&&b<n.link_type_info.StoreSalesRuleData.length&&(a.find("#link_param_sales_show").empty(),$("#plugin_edit_dialog_store_sales_tmpl").tmpl({Sales:n.link_type_info.StoreSalesRuleData[b].Rule}).appendTo(a.find("#link_param_sales_show")))}function l(){var b=
a.find("#tag_class").find("option:selected").val();a.find("#tag_item").empty();0<=b?$("#plugin_edit_dialog_tag_item_tmpl").tmpl(n.link_type_info.TagClass[b]).appendTo(a.find("#tag_item")):$("#plugin_edit_dialog_tag_item_tmpl").tmpl(null).appendTo(a.find("#tag_item"))}var n=this;$("#plugin_edit_dialog_link_param_tmpl").tmpl(b).appendTo(a);var d={};d.nav_class1=store_nav_data.store_nav.StoreNavClass1;$("#plugin_edit_dialog_class1_tmpl").tmpl(d).appendTo(a.find("#class1_select"));$("#plugin_edit_dialog_class2_tmpl").tmpl(d).appendTo(a.find("#class2_select"));
$("#plugin_edit_dialog_class3_tmpl").tmpl(d).appendTo(a.find("#class3_select"));a.find("#class1_select").change(function(){c()});a.find("#class2_select").change(function(){g()});if(b.LinkType==Constant.LINK_TYPE_CLASS)try{var h=$.parseJSON(b.LinkParam);if(0<h.class1_id){var m=a.find("#class1_select option[class_id="+h.class1_id+"]").val();a.find("#class1_select").val(m);c()}if(0<h.class2_id){var e=a.find("#class2_select option[class_id="+h.class2_id+"]").val();a.find("#class2_select").val(e);g()}if(0<
h.class3_id){var f=a.find("#class3_select option[class_id="+h.class3_id+"]").val();a.find("#class3_select").val(f)}}catch(t){}$("#plugin_edit_dialog_store_news_tmpl").tmpl({News:n.link_type_info.StoreNews}).appendTo(a.find("#link_param_news_show"));b.LinkType==Constant.LINK_TYPE_NEWS&&a.find("#link_param_news").val(b.LinkParam);h=n.link_type_info.StorePage;$("#plugin_edit_dialog_store_page_tmpl").tmpl({Pages:h}).appendTo(a.find("#link_param_page_show"));b.LinkType==Constant.LINK_TYPE_PAGE&&a.find("#link_param_page").val(b.LinkParam);
a.find("#link_param_sales_type_show").empty();$("#plugin_edit_dialog_store_sales_type_tmpl").tmpl({SalesType:n.link_type_info.StoreSalesRuleData}).appendTo(a.find("#link_param_sales_type_show"));a.find("#link_param_sales_type").change(k);k();if(b.LinkType==Constant.LINK_TYPE_SALES)for(var p=1;p<n.link_type_info.StoreSalesRuleData.length;p++){for(var r=!1,q=0;q<n.link_type_info.StoreSalesRuleData[p].Rule.length;q++)if(n.link_type_info.StoreSalesRuleData[p].Rule[q].Id==b.LinkParam){a.find("#link_param_sales_type").val(p);
k();a.find("#link_param_sales").val(b.LinkParam);r=!0;break}if(r)break}a.find("#tag_class").change(function(){l()});$("#plugin_edit_dialog_tag_class_tmpl").tmpl(n.link_type_info).appendTo(a.find("#tag_class"));l();if(b.LinkType==Constant.LINK_TYPE_TAGITEM)try{for(var s=b.LinkParam,r=!1,p=0;p<n.link_type_info.TagClass.length;p++){for(q=0;q<n.link_type_info.TagClass[p].TagItem.length;q++)n.link_type_info.TagClass[p].TagItem[q].TagItemId==s&&(a.find("#tag_class").val(p),l(),a.find("#tag_item").val(s));
if(r)break}}catch(u){}$("#plugin_edit_dialog_seller_sub_tmpl").tmpl(n.link_type_info).appendTo(a.find("#link_param_seller_sub_show"));b.LinkType==Constant.LINK_TYPE_SELLER_SUB&&a.find("#link_param_seller_sub").val(b.LinkParam)},check_input_link_type:function(a,b){var c={result:!1,link_param:"",error_field:null,error_str:""};switch(b){case Constant.LINK_TYPE_NONE:break;case Constant.LINK_TYPE_NEWS:c.link_param=a.find("#link_param_news").find("option:selected").val();break;case Constant.LINK_TYPE_URL:c.link_param=
$.trim(a.find("#link_param_extern_url").val());c.link_param.length>Constant.INPUT_PLUGIN_LINK_PARAM_MAX?(c.error_field=a.find("#link_param_extern_url"),c.error_str="\u5916\u90e8URL\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7"+Constant.INPUT_PLUGIN_LINK_PARAM_MAX+"\u5b57"):0>=c.link_param.length?(c.error_field=a.find("#link_param_extern_url"),c.error_str="\u8bf7\u8f93\u5165\u5916\u90e8URL"):(a.find("#link_param_extern_url").val(c.link_param),CheckInput.IsUrl($.trim(c.link_param))?c.link_param="http://"+c.link_param.substr(7):
c.link_param="http://"+c.link_param);break;case Constant.LINK_TYPE_SEARCH:c.link_param=$.trim(a.find("#link_param_search_key").val());c.link_param.length>Constant.INPUT_PLUGIN_LINK_SEARCH_KEY_MAX?(c.error_field=a.find("#link_param_search_key"),c.error_str="\u641c\u7d22\u5173\u952e\u5b57\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7"+Constant.INPUT_PLUGIN_LINK_SEARCH_KEY_MAX+"\u5b57"):0>=c.link_param.length?(c.error_field=a.find("#link_param_search_key"),c.error_str="\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u5b57"):
a.find("#link_param_search_key").val(c.link_param);break;case Constant.LINK_TYPE_CLASS:var g={};g.class1_id=a.find("#class1_select").find("option:selected").attr("class_id");g.class2_id=a.find("#class2_select").find("option:selected").attr("class_id");g.class3_id=a.find("#class3_select").find("option:selected").attr("class_id");0>=g.class1_id?(c.error_field=a.find("#class1_select"),c.error_str="\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b"):c.link_param=stringify(g);break;case Constant.LINK_TYPE_PAGE:c.link_param=
a.find("#link_param_page").find("option:selected").val();break;case Constant.LINK_TYPE_SALES:c.link_param=a.find("#link_param_sales").find("option:selected").val();break;case Constant.LINK_TYPE_GOODS:break;case Constant.LINK_TYPE_TAGITEM:g=a.find("#tag_item").find("option:selected").val();0<g?c.link_param=g:(c.error_field=a.find("#tag_item"),c.error_str="\u8bf7\u9009\u62e9\u6807\u7b7e\u9879\u76ee");break;case Constant.LINK_TYPE_SELLER_SUB:g=a.find("#link_param_seller_sub").find("option:selected").val();
null!=g&&""!=g?c.link_param=g:(c.error_field=a.find("#link_param_seller_sub"),c.error_str="\u8bf7\u9009\u62e9\u5165\u9a7b\u65d7\u8230\u5e97");break;default:c.error_field=a,c.error_str="\u975e\u6cd5\u7684\u9009\u9879"}c.result=null!=c.error_field?!1:!0;return c},preview:function(a,b,c){var g=this.body.width(),k=this.body.height();if(null==b||null==c)b=g,c=k;c=$.extend(!0,{},this);c.show_mode=PluginConstant.SHOW_MODE_PREVIEW;null==a?($("#plugin_preview_dialog").empty(),$("#plugin_preview_dialog_tmpl").tmpl(null).appendTo("#plugin_preview_dialog"),
$("#plugin_preview_dialog").dialog({autoOpen:!1,resizable:!1,modal:!0,width:g+5,height:k+85,title:"\u9884\u89c8"}),$("#plugin_preview_dialog").dialog("open")):$(a).empty();c.frame=$('<div class="plugin_containers"></div>');c.body=$("<div></div>");c.body.appendTo(c.frame);c.body.width(g);c.body.height(k);c.frame.width(g);c.frame.height(k);c.frame.css("position","relative");c.frame.css("top","0px");c.frame.css("left","0px");null==a?(c.frame.appendTo($("#plugin_preview_dialog").dialog("widget").find(".plugin_preview_content")),
$("#plugin_preview_dialog").dialog("widget").find("#button_close").click(function(){$("#plugin_preview_dialog").dialog("close")})):c.frame.appendTo($(a));g!=b&&(a=b/g,$.support.leadingWhitespace?(c.frame.css("transform","scale("+a+")"),c.frame.css("transform-origin","top left"),c.frame.css("-ms-transform","scale("+a+")"),c.frame.css("-ms-transform-origin","top left"),c.frame.css("-o-transform","scale("+a+")"),c.frame.css("-o-transform-origin","top left"),c.frame.css("-moz-transform","scale("+a+")"),
c.frame.css("-moz-transform-origin","top left"),c.frame.css("-webkit-transform","scale("+a+")"),c.frame.css("-webkit-transform-origin","top left")):c.frame.css("zoom",a));c.show_data()}};function plugin_setting(a){if(!$(a.target).hasClass("plugin_touch_cancel")&&!$(a.target).parents().hasClass("plugin_touch_cancel"))a.data.on_setting()};var plugin_icon_advertising=getContentPath("Content/Admin/images/icon_01.png"),plugin_icon_image=getContentPath("Content/Admin/images/icon_02.png"),plugin_icon_showcase1=getContentPath("Content/Admin/images/icon_05.png"),plugin_icon_showcase2=getContentPath("Content/Admin/images/icon_06.png"),plugin_icon_showcase3=getContentPath("Content/Admin/images/icon_07.png"),plugin_icon_nav_all=getContentPath("Content/Admin/images/icon_08.png"),plugin_icon_nav_v=getContentPath("Content/Admin/images/icon_09.png"),
plugin_icon_nav_h=getContentPath("Content/Admin/images/icon_09.png"),plugin_icon_nav_tag=getContentPath("Content/Admin/images/icon_13.png"),plugin_icon_nav_sellersub_all=getContentPath("Content/Admin/images/icon_20.png"),plugin_icon_nav_sellersub_v=getContentPath("Content/Admin/images/icon_21.png"),plugin_icon_news_text=getContentPath("Content/Admin/images/icon_03.png"),plugin_icon_news_graphic=getContentPath("Content/Admin/images/icon_04.png"),plugin_icon_free=getContentPath("Content/Admin/images/icon_10.png"),
plugin_icon_message=getContentPath("Content/Admin/images/icon_11.png"),plugin_icon_coupon=getContentPath("Content/Admin/images/icon_16.png"),plugin_icon_carousel=getContentPath("Content/Admin/images/icon_12.png"),plugin_icon_store_logon=getContentPath("Content/Admin/images/icon_17.png"),plugin_icon_sub_store=getContentPath("Content/Admin/images/icon_18.png"),plugin_icon_sub_store_list=getContentPath("Content/Admin/images/icon_19.png"),istore_option={selector:"#store_containers",page_id:0,move_margin:0,
size_margin:-10,frame_config:Constant.ISTORE_FRAME_CONFIG_PC_STYLE0,on_sized:function(a,b){$(".contentmainbox").height(b)},store_info:{multiuser_support:!1,seller_sub_id:Constant.SELLER_SUB_ID},action_path:{admin_type:"admin",GetPhoto:getActionPath("GetPhoto","AdminOperation"),CorpPhoto:getActionPath("CorpPhoto","AdminOperation"),UploadTempPhoto:getActionPath("UploadTempPhoto","AdminOperation"),GetFolderList:getActionPath("GetFolderList","AdminOperation"),UploadPhoto:getActionPath("UploadPhoto","AdminOperation"),
KindFileManager:getActionPath("KindFileManager","AdminOperation"),GetStoreLayout:getActionPath("GetStoreLayout","Store"),UpdateStoreLayout:getActionPath("UpdateStoreLayout","Store"),AddStoreLayout:getActionPath("AddStoreLayout","Store"),DeleteStoreLayout:getActionPath("DeleteStoreLayout","Store"),GetStoreLinkType:getActionPath("GetStoreLinkType","Store"),GetAdvertising:getActionPath("GetAdvertising","Store"),EditAdvertising:getActionPath("EditAdvertising","Store"),GetPluginButton:getActionPath("GetPluginButton",
"Store"),EditPluginButton:getActionPath("EditPluginButton","Store"),GetPluginStoreCoupon:getActionPath("GetPluginStoreCoupon","Store"),EditPluginStoreCoupon:getActionPath("EditPluginStoreCoupon","Store"),GetStoreFree:getActionPath("GetStoreFree","Store"),EditStoreFree:getActionPath("EditStoreFree","Store"),GetPluginHeader:getActionPath("GetPluginHeader","Store"),EditPluginHeader:getActionPath("EditPluginHeader","Store"),GetPluginStoreMessage:getActionPath("GetPluginStoreMessage","Store"),EditPluginStoreMessage:getActionPath("EditPluginStoreMessage",
"Store"),GetStoreNavigation:getActionPath("GetStoreNavigation","Store"),EditStoreNavigation:getActionPath("EditStoreNavigation","Store"),GetNewsGroup:getActionPath("GetNewsGroup","Store"),GetNews:getActionPath("GetNews","Store"),EditNewsGroup:getActionPath("EditNewsGroup","Store"),GetShowcase:getActionPath("GetShowcase","Store"),EditShowcase:getActionPath("EditShowcase","Store"),GetPluginStoreLogon:getActionPath("GetPluginStoreLogon","Store"),EditPluginStoreLogon:getActionPath("EditPluginStoreLogon",
"Store"),GetPluginSubStore:getActionPath("GetPluginSubStore","Store"),EditPluginSubStore:getActionPath("EditPluginSubStore","Store"),GetPluginSubStoreList:getActionPath("GetPluginSubStoreList","Store"),EditPluginSubStoreList:getActionPath("EditPluginSubStoreList","Store"),GetSimpleSellerSubFromId:getActionPath("GetSimpleSellerSubFromId","Store"),GetTagClass:getActionPath("GetTagClass","Goods"),SearchGoods:getActionPath("SearchGoods","Goods"),SearchSalesGoods:getActionPath("SearchSalesGoods","Goods")}},
plugin_option=[{plugin_type:Constant.PLUGIN_TYPE_ADVERTISING,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5e7f\u544a\u8f6e\u64ad" src="'+plugin_icon_advertising+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_advertising+')"></div>',tools_bar:".toolbar-box #plugin_type0",grid_cx_init:1,grid_cy_init:4,on_get_parts_size:parts_size_advertising,on_show:show_advertising,on_sized:size_advertising},{plugin_type:Constant.PLUGIN_TYPE_IMAGE,plugin_device:Constant.STORE_DEVICE_PC,
content:'<div><img title="\u56fe\u7247\u5c55\u793a" src="'+plugin_icon_image+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_image+')"></div>',tools_bar:".toolbar-box #plugin_type1",grid_cx_init:1,grid_cy_init:4,on_get_parts_size:parts_size_image,on_show:show_image,on_sized:size_image},{plugin_type:Constant.PLUGIN_TYPE_SHOWCASE1,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5355\u6807\u7b7e\u6a71\u7a97" src="'+plugin_icon_showcase1+'" /> </div>',icon:'<div style="background-image:url('+
plugin_icon_showcase1+')"></div>',tools_bar:".toolbar-box #plugin_type2",grid_cx_init:1,grid_cy_init:6,on_get_right_size:right_size_showcase_type0,on_show:show_showcase_type0,on_sized:size_showcase_type0},{plugin_type:Constant.PLUGIN_TYPE_SHOWCASE2,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u591a\u6807\u7b7e\u6a71\u7a97" src="'+plugin_icon_showcase2+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_showcase2+')"></div>',tools_bar:".toolbar-box #plugin_type3",
grid_cx_init:1,grid_cy_init:6,on_get_right_size:right_size_showcase_type1,on_show:show_showcase_type1,on_sized:size_showcase_type1},{plugin_type:Constant.PLUGIN_TYPE_SHOWCASE3,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u4fa7\u680f\u6a71\u7a97" src="'+plugin_icon_showcase3+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_showcase3+')"></div>',tools_bar:".toolbar-box #plugin_type4",grid_cx_init:1,grid_cy_init:3,on_get_right_size:right_size_showcase_type2,on_show:show_showcase_type2,
on_sized:size_showcase_type2},{plugin_type:Constant.PLUGIN_TYPE_NAV_ALL,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5168\u5206\u7c7b\u5bfc\u822a" src="'+plugin_icon_nav_all+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_all+')"></div>',tools_bar:".toolbar-box #plugin_type5",grid_cx_init:1,grid_cy_init:8,on_show:show_nav_all,on_sized:size_nav_all},{plugin_type:Constant.PLUGIN_TYPE_NAV_V,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u7eb5\u5411\u5206\u7c7b\u5bfc\u822a" src="'+
plugin_icon_nav_v+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_v+')"></div>',tools_bar:".toolbar-box #plugin_type6",grid_cx_init:1,grid_cy_init:4,on_show:show_nav_v,on_sized:size_nav_v},{plugin_type:Constant.PLUGIN_TYPE_NAV_TAG,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u6807\u7b7e\u5bfc\u822a" src="'+plugin_icon_nav_tag+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_tag+')"></div>',tools_bar:".toolbar-box #plugin_type13",grid_cx_init:1,
grid_cy_init:4,on_show:show_nav_tag,on_sized:size_nav_tag},{plugin_type:Constant.PLUGIN_TYPE_NAV_SELLERSUB_ALL,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5546\u5bb6\u5168\u5206\u7c7b" src="'+plugin_icon_nav_sellersub_all+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_sellersub_all+')"></div>',tools_bar:".toolbar-box #plugin_type20",grid_cx_init:1,grid_cy_init:8,on_show:show_nav_all,on_sized:size_nav_all},{plugin_type:Constant.PLUGIN_TYPE_NAV_SELLERSUB_V,
plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5546\u5bb6\u7eb5\u5411\u5206\u7c7b" src="'+plugin_icon_nav_sellersub_v+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_nav_sellersub_v+')"></div>',tools_bar:".toolbar-box #plugin_type21",grid_cx_init:1,grid_cy_init:4,on_show:show_nav_v,on_sized:size_nav_v},{plugin_type:Constant.PLUGIN_TYPE_NEWS_TEXT,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u6587\u5b57\u65b0\u95fb" src="'+plugin_icon_news_text+
'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_news_text+')"></div>',tools_bar:".toolbar-box #plugin_type8",grid_cx_init:1,grid_cy_init:4,on_show:show_text_news,on_sized:size_text_news},{plugin_type:Constant.PLUGIN_TYPE_NEWS_GRAPHIC,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u56fe\u6587\u65b0\u95fb" src="'+plugin_icon_news_graphic+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_news_graphic+')"></div>',tools_bar:".toolbar-box #plugin_type9",
grid_cx_init:1,grid_cy_init:4,on_show:show_graphic_news,on_sized:size_graphic_news},{plugin_type:Constant.PLUGIN_TYPE_FREE,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u81ea\u7531\u7f16\u8f91" src="'+plugin_icon_free+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_free+')"></div>',tools_bar:".toolbar-box #plugin_type10",grid_cx_init:1,grid_cy_init:4,on_show:show_free,on_sized:size_free},{plugin_type:Constant.PLUGIN_TYPE_MESSAGE,plugin_device:Constant.STORE_DEVICE_PC,
content:'<div><img title="\u5ba2\u6237\u7559\u8a00" src="'+plugin_icon_message+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_message+')"></div>',tools_bar:".toolbar-box #plugin_type11",grid_cx_init:1,grid_cy_init:5,on_show:show_message,on_sized:size_message},{plugin_type:Constant.PLUGIN_TYPE_CAROUSEL,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u56fe\u7247\u6eda\u64ad" src="'+plugin_icon_carousel+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_carousel+
')"></div>',tools_bar:".toolbar-box #plugin_type12",grid_cx_init:1,grid_cy_init:4,on_get_parts_size:parts_size_carousel,on_show:show_carousel,on_sized:size_carousel},{plugin_type:Constant.PLUGIN_TYPE_COUPON,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u4f18\u60e0\u5238\u67e5\u8be2" src="'+plugin_icon_coupon+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_coupon+')"></div>',tools_bar:".toolbar-box #plugin_type16",grid_cx_init:1,grid_cy_init:5,on_show:show_coupon,
on_sized:size_coupon},{plugin_type:Constant.PLUGIN_TYPE_STORE_LOGON,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u767b\u5f55\u63d2\u4ef6" src="'+plugin_icon_store_logon+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_store_logon+')"></div>',tools_bar:".toolbar-box #plugin_type17",grid_cx_init:1,grid_cy_init:2,on_show:show_store_logon,on_sized:size_store_logon},{plugin_type:Constant.PLUGIN_TYPE_SUB_STORE,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5e97\u94fa\u4fe1\u606f" src="'+
plugin_icon_sub_store+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_sub_store+')"></div>',tools_bar:".toolbar-box #plugin_type18",grid_cx_init:1,grid_cy_init:5,on_show:show_sub_store,on_sized:size_sub_store},{plugin_type:Constant.PLUGIN_TYPE_SUB_STORE_LIST,plugin_device:Constant.STORE_DEVICE_PC,content:'<div><img title="\u5165\u9a7b\u5546\u5bb6" src="'+plugin_icon_sub_store_list+'" /> </div>',icon:'<div style="background-image:url('+plugin_icon_sub_store_list+')"></div>',tools_bar:".toolbar-box #plugin_type19",
grid_cx_init:1,grid_cy_init:5,on_show:show_sub_store_list,on_sized:size_sub_store_list}];
function show_title(a){try{if(a.plugin_type==Constant.PLUGIN_TYPE_SHOWCASE2)a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&$("#showcase_type1_border_tmpl").tmpl(a).appendTo(a.body);else if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.plugin_type==Constant.PLUGIN_TYPE_SHOWCASE1&&(a.data.SearchKeyDisplay=null!=a.data.SearchKey?$.trim(a.data.SearchKey).split("\t"):[]),$("#plugin_border_tmpl").tmpl(a).appendTo(a.body)),a.show_mode==PluginConstant.SHOW_MODE_EDIT&&a.opts.can_setting&&null!=a.change_title){var b=
a.body.find(".plugin_title_pic");b.find(".plugin_title").css("cursor","text");b.find(".plugin_title").click(function(){var c=b.find(".plugin_title_input");c.val($(this).text());c.width($(this).width());c.height($(this).height()-6);$(this).hide();c.show();c.focus();c.blur(function(){var k=$.trim(b.find(".plugin_title").text()),l=$.trim($(this).val());k!=l&&a.change_title(l);c.hide();c.val(k);b.find(".plugin_title").show()});c.keyup(function(a){13==a.keyCode?c.blur():27==a.keyCode&&(c.val(b.find(".plugin_title").text()),
c.blur())})})}}catch(c){}}function get_plugin_inner_size(a){return csharp_get_plugin_size(a.frame_config,a.body.width(),a.body.height(),a.plugin_type,a.data.ShowTitle)}
function set_plugin_boder_size(a){var b=get_plugin_inner_size(a);if(a.plugin_type==Constant.PLUGIN_TYPE_SHOWCASE2)a.body.find(".plugin_title_border").width(b.border_width),a.body.find(".plugin_title_border").height(b.border_height);else switch(a.data.ShowTitle){case 0:a.body.find(".plugin_untitle_noborder").width(b.border_width);a.body.find(".plugin_untitle_noborder").height(b.border_height);break;case 1:a.body.find(".plugin_untitle_border").width(b.border_width);a.body.find(".plugin_untitle_border").height(b.border_height);
break;default:a.body.find(".plugin_title_border").width(b.border_width),a.body.find(".plugin_title_border").height(b.border_height)}a.body.find(".plugin_inner_content").width(b.width);a.body.find(".plugin_inner_content").height(b.height);return b}function show_free(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#store_free_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(b){}size_free(a)}
function size_free(a){set_plugin_boder_size(a);switch(a.show_mode){case PluginConstant.SHOW_MODE_EDIT:var b=a.body.find(".plugin_inner_content").width(),c=a.body.find(".plugin_inner_content").height();a=a.body.find(".plugin_free_mask");a.width(b);a.height(c);a.css("top","0px");a.css("left","0px");a.show()}}
function show_nav_all(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.nav_data=a.get_nav_data(),a.data.Style){case 0:$("#store_nav_all_style0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 1:$("#store_nav_all_style1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 2:$("#store_nav_all_style2_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 3:$("#store_nav_all_style3_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));
break;case 4:$("#store_nav_all_style4_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}switch(a.data.Style){case 1:case 3:case 4:a.body.find(".plugin_title_border").hasClass("Nav_TitleStyleBox")||a.body.find(".plugin_title_border").addClass("Nav_TitleStyleBox")}switch(a.show_mode){case PluginConstant.SHOW_MODE_STATIC:case PluginConstant.SHOW_MODE_DISPLAY:switch(a.data.Style){case 1:var b=60;a.body.find(".nav_style1_content").css("cursor","default");a.body.find(".nav_style1_content_li").hover(function(){a.body.find(".nav_style1_content_li").removeClass("nav_style1_content_hover");
$(this).addClass("nav_style1_content_hover");var c=a.body.find(".nav_style1_content_li").index(this);a.body.find(".nav_style1_sub").hide();a.body.find(".nav_style1_sub").eq(c).show();a.body.find(".nav_style1_sub").eq(c).height()<b&&a.body.find(".nav_style1_sub").eq(c).height(b);var k=$(this).offset().top-a.body.find(".nav_style1_main_content").offset().top,k=k+($(this).height()+10);a.body.find(".nav_style1_sub").eq(c).height()<k&&a.body.find(".nav_style1_sub").eq(c).css("top",Math.round(k-a.body.find(".nav_style1_sub").eq(c).height())+
"px")},function(){});a.body.find(".nav_style1_main_content").hover(function(){},function(){a.body.find(".nav_style1_content_li").removeClass("nav_style1_content_hover");a.body.find(".nav_style1_sub").hide()});break;case 3:a.body.find(".nav_style3_SubClass2_select").hover(function(){var a=$(this).parents(".nav_style1_sub"),b=a.find(".nav_style3_SubClass2_select").index(this);a.find(".icon_arrow_NavClass2").hide();a.find(".nav_style3_SubClass2_select").removeClass("checked");a.find(".nav_style1_sub_class2").hide();
$(this).addClass("checked");$(this).find(".icon_arrow_NavClass2").show();a.find(".nav_style1_sub_class2").eq(b).show()},function(){});b=60;a.body.find(".nav_style1_content").css("cursor","default");a.body.find(".nav_style1_content_li").hover(function(){a.body.find(".nav_style1_content_li").removeClass("nav_style1_content_hover1");$(this).addClass("nav_style1_content_hover1");var c=a.body.find(".nav_style1_content_li").index(this);a.body.find(".nav_style1_sub").hide();a.body.find(".nav_style1_sub").eq(c).show();
a.body.find(".nav_style1_sub").eq(c).height()<b&&a.body.find(".nav_style1_sub").eq(c).height(b);var k=$(this).offset().top-a.body.find(".nav_style3_main_content").offset().top,k=k+($(this).height()+10);a.body.find(".nav_style1_sub").eq(c).height()<k&&a.body.find(".nav_style1_sub").eq(c).css("top",Math.round(k-a.body.find(".nav_style1_sub").eq(c).height())+"px")},function(){});a.body.find(".nav_style3_main_content").hover(function(){},function(){a.body.find(".nav_style1_content_li").removeClass("nav_style1_content_hover1");
a.body.find(".nav_style1_sub").hide()});break;case 4:b=60,a.body.find(".nav_style1_content").css("cursor","default"),a.body.find(".nav_style4_Class12").hover(function(){a.body.find(".nav_style4_Class12").removeClass("nav_style1_content_hover");$(this).addClass("nav_style1_content_hover");var c=a.body.find(".nav_style4_Class12").index(this);a.body.find(".nav_style1_sub").hide();a.body.find(".nav_style1_sub").eq(c).show();a.body.find(".nav_style1_sub").eq(c).height()<b&&a.body.find(".nav_style1_sub").eq(c).height(b);
var k=$(this).offset().top-a.body.find(".nav_style4_main_content").offset().top,k=k+($(this).height()+10);a.body.find(".nav_style1_sub").eq(c).height()<k&&a.body.find(".nav_style1_sub").eq(c).css("top",Math.round(k-a.body.find(".nav_style1_sub").eq(c).height())+"px")},function(){}),a.body.find(".nav_style4_main_content").hover(function(){},function(){a.body.find(".nav_style4_Class12").removeClass("nav_style1_content_hover");a.body.find(".nav_style1_sub").hide()})}a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&
(a.body.find(".class1").css("cursor","pointer"),a.body.find(".class1").click(function(){var b=$(this).attr("class1_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_link(null,b,null,null,null,null,null);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,b,null,null)}}),a.body.find(".class2").css("cursor","pointer"),a.body.find(".class2").click(function(){var b=$(this).attr("class2_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_link(null,
null,b,null,null,null,null);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,null,b,null)}}),a.body.find(".class3").css("cursor","pointer"),a.body.find(".class3").click(function(){var b=$(this).attr("class3_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_link(null,null,null,b,null,null,null);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,null,null,b)}}))}}catch(c){}size_nav_all(a)}
function size_nav_all(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;switch(a.data.Style){case 0:a.body.find(".nav_style0_main_content").width(c),a.body.find(".nav_style0_main_content").height(b),600>=c?a.body.find(".nav_style0_a").css("width","100%"):a.body.find(".nav_style0_a").css("width","49%")}}
function show_nav_v(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.nav_data=a.get_nav_data(),a.data.Style){case 0:$("#store_nav_v_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}a.show_mode==PluginConstant.SHOW_MODE_DISPLAY&&(a.body.find(".nav_class2").click(function(){var b=$(this).attr("class2_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_link(null,null,b,null,null,null,null);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,
null,b,null)}}),a.body.find(".nav_class3").click(function(){var b=$(this).attr("class3_id");switch(a.data.Type){case Constant.PLUGIN_STORE_NAVIGATION_TYPE_NAV:goto_search_link(null,null,null,b,null,null,null);break;case Constant.PLUGIN_STORE_NAVIGATION_TYPE_SELLERSUB:goto_search_store_link(null,null,null,b)}}))}catch(b){}size_nav_v(a)}function size_nav_v(a){set_plugin_boder_size(a)}
function show_nav_tag(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#store_nav_tag_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))),2==a.data.Style?a.show_mode!=PluginConstant.SHOW_MODE_DISPLAY&&a.show_mode!=PluginConstant.SHOW_MODE_STATIC||a.body.find("#nav_tag_seach").click(function(){var b=a.body.find("#nav_tag_select").val();if(""==b)return alert("\u8bf7\u9009\u62e9\u6709\u6548\u7684\u67e5\u8be2\u6761\u4ef6"),!1;goto_search_link(null,null,
null,null,null,b,null)}):a.show_mode==PluginConstant.SHOW_MODE_DISPLAY&&a.body.find(".tag_item").click(function(){var a=$(this).attr("item_id");goto_search_link(null,null,null,null,null,a,null)})}catch(b){}size_nav_tag(a)}function size_nav_tag(a){set_plugin_boder_size(a)}
function show_text_news(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.data.Style){case 0:$("#text_news_style0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 1:$("#text_news_style1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 2:$("#text_news_style2_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 3:$("#text_news_style3_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}}catch(b){}news_click(a);
size_text_news(a)}
function size_text_news(a){var b=set_plugin_boder_size(a).height;switch(a.data.Style){case 2:a.body.find(".news_title").each(function(){var a=$(this).parent(),b=a.width(),a=a.find(".text_news_style2_position").width();$(this).width(b-a)})}var c=a.body.find(".text_news_list li").height(),b=Math.floor(b/c);a.body.find(".plugin_news_main_content").height(c*b);!0==a.data.Roll&&a.body.find(".text_news_list").carouFredSel({items:b,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0},direction:a.data.Direction==
Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"})}function show_graphic_news(a){try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC)switch(a.body.empty(),show_title(a),a.data.Style){case 0:$("#graphic_news_style0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));break;case 1:$("#graphic_news_style1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))}}catch(b){}news_click(a);size_graphic_news(a)}
function size_graphic_news(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;if(0==a.data.Style){var g=a.body.find(".graphic_news_style0_img").width(),c=c-g-5;a.body.find(".graphic_news_style0_news").width(c)}else g=a.body.find(".graphic_news_style1_img").width(),c=c-g-5,a.body.find(".graphic_news_style1_news").width(c);a.body.find("img.lazy").lazyload({event:"scroll whenever-i-want",effect:"fadeIn"});if(!0==a.data.Roll)switch(a.data.Style){case 0:c=a.body.find(".graphic_news_style0_list li").height();
b=Math.round(b/c);a.body.find(".graphic_news_style0_list").carouFredSel({items:b,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.trigger("whenever-i-want")}},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"});break;case 1:c=a.body.find(".graphic_news_style1_list li").height(),b=Math.round(b/c),a.body.find(".graphic_news_style1_list").carouFredSel({items:b,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.trigger("whenever-i-want")}},
direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"})}}
function news_click(a){switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:a.body.find(".news_title").click(function(){var b=$(this).attr("news_id"),c=$(this).attr("index_id"),b=a.get_news(b);if(null!=b)switch(b.LinkType){case Constant.LINK_TYPE_NONE:goto_news_link(c,plugin_save_level);break;case Constant.LINK_TYPE_URL:goto_url_link(b.LinkParam);break;case Constant.LINK_TYPE_SEARCH:goto_search_link(b.LinkParam,null,null,null,null,null,null);break;case Constant.LINK_TYPE_CLASS:try{var g=$.parseJSON(b.LinkParam);
g.class1_id=null==g.class1_id||""==$.trim(g.class1_id)?null:g.class1_id;g.class2_id=null==g.class2_id||""==$.trim(g.class2_id)?null:g.class2_id;g.class3_id=null==g.class3_id||""==$.trim(g.class3_id)?null:g.class3_id;goto_search_link(null,g.class1_id,g.class2_id,g.class3_id,null,null,null)}catch(k){}break;case Constant.LINK_TYPE_PAGE:goto_page_link(b.LinkParam,!0);break;case Constant.LINK_TYPE_SALES:goto_search_link(null,null,null,null,b.LinkParam,null,null);break;case Constant.LINK_TYPE_GOODS:goto_goods_link(b.LinkParam,
!0);break;case Constant.LINK_TYPE_TAGITEM:goto_search_link(null,null,null,null,null,b.LinkParam,null);break;case Constant.LINK_TYPE_SELLER_SUB:goto_sub_link(b.LinkParam)}})}}
function show_advertising(a){try{switch(a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#advertising_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))),a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:a.body.find(".adv_image").css("cursor","pointer"),a.body.find(".adv_image").click(function(){var b=$(this).attr("index");image_click(a.data.Advertising[b])})}}catch(b){}size_advertising(a)}
function parts_size_advertising(a,b){var c=get_plugin_inner_size(a),g=[];g.push({w:c.width,h:c.height});return g[b]}
function size_advertising(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;a.body.find("img.lazy").lazyload({event:"scroll whenever-i-want",effect:"fadeIn"});0==a.data.Style?(a.body.find(".banner_img li").width(c),a.body.find(".banner_img li").height(b),a.body.find(".banner_img img").width(c),a.body.find(".banner_img img").height(b),a.body.find(".banner_img").carouFredSel({items:1,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.trigger("whenever-i-want")}},
direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_LEFT?"left":"right",pagination:{container:a.body.find(".banner_number"),anchorBuilder:function(a){return'<a class="bg_j" href="javascript:void(0)">'+a+"</a>"}}})):(a.body.find(".slideshow").width(10*c),a.body.find(".slideshow").height(b),a.body.find(".slideshow li").width(c),a.body.find(".slideshow li").height(b),a.body.find(".slideshow img").width(c),a.body.find(".slideshow img").height(b),a.body.find(".next_arrow").css("top",Math.floor((b-
42)/2)+"px"),a.body.find(".prev_arrow").css("top",Math.floor((b-42)/2)+"px"),a.body.find(".plugin_inner_content").mouseover(function(){a.body.find(".next_arrow_box").show();a.body.find(".prev_arrow_box").show()}).mouseout(function(){a.body.find(".next_arrow_box").hide();a.body.find(".prev_arrow_box").hide()}),a.body.find(".slides").carouFredSel({items:1,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.trigger("whenever-i-want")}},direction:a.data.Direction==
Constant.PLUGIN_CAROUSEL_DIR_LEFT?"left":"right",prev:a.body.find(".next_arrow_box"),next:a.body.find(".prev_arrow_box")}),a.body.find(".next_arrow_box").hide(),a.body.find(".prev_arrow_box").hide())}
function image_click(a){if(null!=a)switch(a.LinkType){case Constant.LINK_TYPE_NEWS:goto_news_link(a.LinkParam,plugin_save_level);break;case Constant.LINK_TYPE_URL:goto_url_link(a.LinkParam);break;case Constant.LINK_TYPE_SEARCH:goto_search_link(a.LinkParam,null,null,null,null,null,null);break;case Constant.LINK_TYPE_CLASS:try{var b=$.parseJSON(a.LinkParam);b.class1_id=null==b.class1_id||""==$.trim(b.class1_id)?null:b.class1_id;b.class2_id=null==b.class2_id||""==$.trim(b.class2_id)?null:b.class2_id;
b.class3_id=null==b.class3_id||""==$.trim(b.class3_id)?null:b.class3_id;goto_search_link(null,b.class1_id,b.class2_id,b.class3_id,null,null,null)}catch(c){}break;case Constant.LINK_TYPE_PAGE:goto_page_link(a.LinkParam,!0);break;case Constant.LINK_TYPE_SALES:goto_search_link(null,null,null,null,a.LinkParam,null,null);break;case Constant.LINK_TYPE_GOODS:goto_goods_link(a.LinkParam,!0);break;case Constant.LINK_TYPE_TAGITEM:goto_search_link(null,null,null,null,null,a.LinkParam,null);break;case Constant.LINK_TYPE_SELLER_SUB:goto_sub_link(a.LinkParam)}}
function show_image(a){try{switch(a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#image_type"+a.data.Type+"_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))),a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:for(var b=0;b<a.data.Advertising.length;b++){var c=a.body.find("#image"+b);c.attr("index",b);c.css("cursor","pointer");c.click(function(){var b=$(this).attr("index");image_click(a.data.Advertising[b])})}}}catch(g){}size_image(a)}
function parts_size_image(a,b){var c=size_image_calc(a);return b<c.length?c[b]:{w:0,h:0}}function size_image_calc(a){a=csharp_size_image_calc(a.frame_config,a.body.width(),a.body.height(),a.plugin_type,a.data.ShowTitle,a.data.Type,a.data.Style);for(var b=0;b<a.length;b++)a[b].w=parseInt(a[b].w),a[b].h=parseInt(a[b].h);return a}
function size_image(a){set_plugin_boder_size(a);if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC){var b=size_image_calc(a);a.body.find(".li1").width(Math.floor(b[1].w));a.body.find(".li1").height(Math.floor(b[1].h));a.body.find(".li2").width(Math.floor(b[2].w));a.body.find(".li2").height(Math.floor(b[2].h));a.body.find(".li3").width(Math.floor(b[3].w));a.body.find(".li3").height(Math.floor(b[3].h));a.body.find(".li4").width(Math.floor(b[4].w));a.body.find(".li4").height(Math.floor(b[4].h));a.body.find(".li5").width(Math.floor(b[5].w));
a.body.find(".li5").height(Math.floor(b[5].h));a.body.find(".li6").width(Math.floor(b[6].w));a.body.find(".li6").height(Math.floor(b[6].h));a.body.find(".li7").width(Math.floor(b[7].w));a.body.find(".li7").height(Math.floor(b[7].h));a.body.find(".li8").width(Math.floor(b[8].w));a.body.find(".li8").height(Math.floor(b[8].h));a.body.find(".li9").width(Math.floor(b[9].w));a.body.find(".li9").height(Math.floor(b[9].h))}a.body.find("img.lazy").lazyload({event:"scroll whenever-i-want",effect:"fadeIn"})}
function show_carousel(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#carousel_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")));switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:a.body.find(".adv_image").css("cursor","pointer"),a.body.find(".adv_image, .adv_text").click(function(){var b=$(this).attr("index");image_click(a.data.Advertising[b])})}a.data.Setting.ShowText==Constant.PLUGIN_CAROUSEL_TEXT_NONE?a.body.find(".adv_text").hide():
a.body.find(".adv_text").show()}catch(b){}size_carousel(a)}function parts_size_carousel(a,b){var c=get_plugin_inner_size(a),g=[];g.push({w:c.width,h:c.height});for(var k=0,l=0,k=a.data.Setting.Gap==Constant.PLUGIN_CAROUSEL_GAP_NONE?parseInt(c.width/a.data.Setting.ShowNumber):parseInt((c.width-4*a.data.Setting.ShowNumber)/a.data.Setting.ShowNumber),l=a.data.Setting.ShowText==Constant.PLUGIN_CAROUSEL_TEXT_NONE?c.height:c.height-40,c=0;c<a.data.Advertising.length;c++)g.push({w:k,h:l});return g[b]}
function size_carousel(a){var b=set_plugin_boder_size(a),c=b.height,g=0,k=0,g=a.data.Setting.Gap==Constant.PLUGIN_CAROUSEL_GAP_NONE?parseInt(b.width/a.data.Setting.ShowNumber):parseInt((b.width-4*a.data.Setting.ShowNumber)/a.data.Setting.ShowNumber),k=a.data.Setting.ShowText==Constant.PLUGIN_CAROUSEL_TEXT_NONE?b.height:b.height-40;a.body.find(".plugin_carousel_box li").width(g);a.body.find(".plugin_carousel_box li").height(c);a.data.Setting.Gap==Constant.PLUGIN_CAROUSEL_GAP_NONE?(a.body.find(".plugin_carousel_box li").css("margin-left",
"0px"),a.body.find(".plugin_carousel_box li").css("margin-right","0px")):(a.body.find(".plugin_carousel_box li").css("margin-left","2px"),a.body.find(".plugin_carousel_box li").css("margin-right","2px"));a.body.find(".plugin_carousel_box li img").width(g);a.body.find(".plugin_carousel_box li img").height(k);a.body.show();a.body.find("img.lazy").lazyload({event:"scroll whenever-i-want",effect:"fadeIn"});a.body.find(".plugin_carousel_box").carouFredSel({items:Number(a.data.Setting.ShowNumber),auto:Number(a.data.Setting.Interval),
scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.trigger("whenever-i-want")}},direction:a.data.Setting.Direction==Constant.PLUGIN_CAROUSEL_DIR_LEFT?"left":"right"})}
function showcase_goods_process(a,b,c,g){var k={};k.Style=a.data.Style;k.show_mode=a.show_mode;k.GoodsStyle=a.data.GoodsStyle;null==c&&a.show_mode==PluginConstant.SHOW_MODE_STATIC?(k.label={},k.label.Goods=[],b.find(".goods_list").each(function(){k.label.Goods.push({RuleId:$(this).attr("RuleId"),RuleType:$(this).attr("RuleType"),RuleStartTime:$(this).attr("RuleStartTime").replace(RegExp("[\\\\]","g"),""),RuleEndTime:$(this).attr("RuleEndTime").replace(RegExp("[\\\\]","g"),""),Price:$(this).attr("Price"),
MarketPrice:$(this).attr("MarketPrice"),DiscountPrice:$(this).attr("DiscountPrice")})})):k.label=c;k.label.index=g;if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(b.empty(),$("#showcase_goods_tmpl").tmpl(k).appendTo(b),a.show_mode==PluginConstant.SHOW_MODE_EDIT&&(null==k.label.Goods||0>=k.label.Goods.length)))switch(a.data.Style){case 0:b.addClass("empty_goods1");break;case 1:b.addClass("empty_goods2");break;case 2:b.addClass("empty_goods3")}b.find(".goods_list").each(function(a){a=get_goods_sales(k.label.Goods[a]);
null!=a.rule_icon&&a.rule_icon.appendTo($(this).find("#sales_icon"));null!=a.rule_price&&$(this).find("#sales_price").text((a.rule_price/100).toFixed(2))});switch(a.data.Style){case 0:showcase_fix_image(b.find(".showcase_goods_style0_img").width(),b.find(".showcase_goods_style0_img").height(),b.find(".showcase_goods_style0_img img"));break;case 1:showcase_fix_image(b.find(".showcase_goods_style1").width(),b.find(".showcase_goods_style1").height(),b.find(".showcase_goods_style1 img"))}switch(a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:b.find(".goods_list").css("cursor",
"pointer"),b.find(".goods_list").click(function(){var a=$(this).attr("goods_id");goto_goods_link(a,!0)});case PluginConstant.SHOW_MODE_PREVIEW:case PluginConstant.SHOW_MODE_STATIC:switch(a.data.Style){case 1:b.find(".showcase_goods_style1").hover(function(){$(this).find(".popup_product_name").fadeIn(200)},function(){$(this).find(".popup_product_name").fadeOut(200)})}break;case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(b.find(".showcase_goods_handle").each(function(){var a=$(this).parent(),
b=a.width(),a=a.height();$(this).width(Math.round(b/2));$(this).height(Math.round(a/2));$(this).css("top",Math.round(a/4)+"px");$(this).css("left",Math.round(b/4)+"px")}),b.sortable({cancel:".sortable_cancel",handle:".showcase_goods_handle",stop:function(c,g){var d=b.find(".goods_list").index(g.item)+1;a.move_showcase_goods(g.item.attr("label_id"),g.item.attr("goods_id"),d)}}))}}
function showcase_fix_image(a,b,c){var g,k,l,n;b>a?(k=0,n=b,g=Math.round((b-a)/2),l=b):(g=0,l=a,k=Math.round((a-b)/2),n=a);c.css({width:l+"px",height:n+"px",marginLeft:"-"+g+"px",marginTop:"-"+k+"px"})}
function showcase_fix_goods_list(a,b,c){var g,k;switch(a.data.ShowTitle){case 0:c=6;break;case 1:c=0;break;default:c=12}g=Math.floor(b/168);1>g&&(g=1);b=Math.floor((b-166*g)/(2*g));0>b&&(b=0);g=b;k=20-c;0>k&&(k=0);a.body.find(".goods_list").css("padding-left",b+"px");a.body.find(".goods_list").css("padding-right",g+"px");a.body.find(".goods_list").css("padding-top",c+"px");a.body.find(".goods_list").css("padding-bottom",k+"px")}
function show_showcase_type0(a){try{switch(a.show_mode!=PluginConstant.SHOW_MODE_STATIC?(a.body.empty(),show_title(a),$("#showcase_type0_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")),showcase_goods_process(a,a.body.find(".showcase_type0_goods"),a.data.Labels[0],0)):showcase_goods_process(a,a.body.find(".showcase_type0_goods"),null,0),a.show_mode){case PluginConstant.SHOW_MODE_DISPLAY:case PluginConstant.SHOW_MODE_PREVIEW:a.body.find(".search_key").click(function(){var a=$(this).find("a").text();
goto_search_link(a,null,null,null,null,null,null)});break;case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(a.body.find(".plugin_title_searchkey li").css("cursor","text"),a.body.find(".plugin_title_searchkey a").css("cursor","text"),a.body.find(".search_key").find("a").click(function(){var b=$(this).parents("li"),g=b.find("input");g.val($(this).text());g.width(b.width());g.height(b.height()-4);$(this).hide();g.show();g.focus();g.blur(function(){var k=$.trim(b.find("a").text()),l=$.trim(g.val()),
n=b.attr("index");""==l?a.del_search_key(n):k!=l?a.edit_search_key(n,l):(g.hide(),g.val(k),b.find("a").show())});g.keyup(function(a){13==a.keyCode?g.blur():27==a.keyCode&&(g.val(b.find("a").text()),g.blur())})}),a.body.find(".add_key").click(function(){var b=$(this).find("input");b.show();b.focus();b.blur(function(){var g=$.trim($(this).val());""!=g&&a.add_search_key(g);b.val("");b.hide()});b.keyup(function(a){13==a.keyCode?b.blur():27==a.keyCode&&(b.val(""),b.blur())})}),a.body.find(".plugin_title_searchkey").sortable({cancel:".ui-state-disabled",
stop:function(b,g){var k=g.item.attr("index"),l=a.body.find(".plugin_title_searchkey").find(".search_key").index(g.item);a.move_search_key(k,l)}}))}}catch(b){}size_showcase_type0(a)}
function size_showcase_type0(a){var b=set_plugin_boder_size(a),c=b.width;showcase_fix_goods_list(a,c,b.height);a.body.find("img.lazy").lazyload({event:"scroll whenever-i-want",effect:"fadeIn"});b=a.body.find(".showcase_type0_goods li").width();c=Math.floor(c/b);!0==a.data.Roll&&a.body.find(".showcase_type0_goods").carouFredSel({items:c,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.trigger("whenever-i-want")}},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_RIGHT?
"right":"left"})}function right_size_showcase_type0(a,b,c,g,k){b=5;c=1;switch(a.data.ShowTitle){case 0:c=0;break;case 1:c=0;break;default:c=1}switch(a.data.Style){case 0:b=5;break;case 1:b=5;break;default:b=2}a={cx:g,cy:k};a.cy=k<b+c?b+c:b+c+Math.floor((k-(b+c)+(b-1))/b)*b;return a}
function show_showcase_type1(a){function b(b){var c=a.body.find(".showcase_type1_title").find(".label_list"),g=a.body.find(".showcase_type1_goods"),d=g.eq(b);if(a.show_mode==PluginConstant.SHOW_MODE_STATIC){var h=c.eq(b).attr("processed");if(null==h||"true"!=h)showcase_goods_process(a,d,null,b),c.eq(b).attr("processed","true")}c.index(this);c.removeClass("checked");c.eq(b).addClass("checked");g.hide();d.show();null==d.attr("lazy")&&a.body.find("img.lazy").lazyload({event:"scroll whenever-i-want",
effect:"fadeIn"});d.attr("lazy","1")}try{if(a.show_mode!=PluginConstant.SHOW_MODE_STATIC){a.body.empty();show_title(a);$("#showcase_type1_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"));for(var c=0;c<a.data.Labels.length;c++)showcase_goods_process(a,a.body.find(".showcase_type1_goods").eq(c),a.data.Labels[c],c);null!=a.data.Labels&&0<a.data.Labels.length&&(a.curr_label<a.data.Labels.length?b(a.curr_label):(a.curr_label=0,b(0)))}else a.curr_label=0,b(0);a.body.find(".showcase_type1_title").find(".label_list").hover(function(){var c=
a.body.find(".showcase_type1_title").find(".label_list").index(this);b(c);a.curr_label=c},function(){});switch(a.show_mode){case PluginConstant.SHOW_MODE_EDIT:a.opts.can_setting&&(a.body.find(".label_list a").css("cursor","text"),a.body.find(".label_list").find("a").click(function(){var b=$(this).parents("li"),c=b.find("input");c.val($(this).text());c.width(b.width());c.height(b.height()-4);$(this).hide();c.show();c.focus();c.blur(function(){var g=$.trim(b.find("a").text()),d=$.trim(c.val()),h=b.attr("label_id");
""==d?a.delete_label(h):g!=d&&a.change_label_name(h,d);c.hide();c.val(g);b.find("a").show()});c.keyup(function(a){13==a.keyCode?c.blur():27==a.keyCode&&(c.val(b.find("a").text()),c.blur())})}),a.body.find(".add_label").click(function(){var b=$(this).find("input");b.show();b.focus();b.blur(function(){var c=$.trim($(this).val());""!=c&&a.add_label(c);b.val("");b.hide()});b.keyup(function(a){13==a.keyCode?b.blur():27==a.keyCode&&(b.val(""),b.blur())})}),a.body.find(".showcase_type1_title").sortable({cancel:".sortable_cancel",
stop:function(b,c){var g=a.body.find(".showcase_type1_title").find("li").index(c.item)+1;a.move_label(c.item.attr("label_id"),g)}}))}}catch(g){}size_showcase_type1(a)}function size_showcase_type1(a){var b=set_plugin_boder_size(a);showcase_fix_goods_list(a,b.width,b.height)}function right_size_showcase_type1(a,b,c,g,k){b=5;switch(a.data.Style){case 0:b=5;break;case 1:b=5;break;default:b=2}a={cx:g,cy:k};a.cy=k<b+1?b+1:b+1+Math.floor((k-(b+1)+(b-1))/b)*b;return a}
function show_showcase_type2(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC?(a.body.empty(),show_title(a),$("#showcase_type2_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")),showcase_goods_process(a,a.body.find(".showcase_type2_goods"),a.data.Labels[0],0)):showcase_goods_process(a,a.body.find(".showcase_type2_goods"),null,0)}catch(b){}size_showcase_type2(a)}
function size_showcase_type2(a){var b=set_plugin_boder_size(a),c=b.width,b=b.height;a.body.find(".showcase_type2_goods li").width(c);a.body.find(".showcase_type2_goods .a_text").width(c-5-90);a.body.find("img.lazy").lazyload({event:"scroll whenever-i-want",effect:"fadeIn"});c=a.body.find(".showcase_type2_goods li").height();c=Math.floor(b/c);!0==a.data.Roll&&a.body.find(".showcase_type2_goods").carouFredSel({items:c,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0,onBefore:function(){a.body.trigger("whenever-i-want")}},
direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"})}function right_size_showcase_type2(a,b,c,g,k){return right_size_showcase_type0(a,b,c,g,k)}
function show_message(a){function b(a,b,c){if(!CheckInput.IsEmpty(a.Contacts)&&a.Contacts.length>Constant.INPUT_REALNAME_MAX)return alert("\u59d3\u540d\u4e0d\u80fd\u5927\u4e8e"+Constant.INPUT_REALNAME_MAX+"\u4e2a\u5b57"),!1;if(""==a.Phone&&""==a.Qq)return alert("\u8bf7\u81f3\u5c11\u7559\u4e0b\u4e00\u79cd\u8054\u7cfb\u65b9\u5f0f(\u624b\u673a\u53f7\u7801\u6216QQ\u53f7\u7801)"),!1;if(""!=a.Phone&&!CheckInput.IsMobilePhone(a.Phone))return alert("\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"),
!1;if(""!=a.Qq&&!CheckInput.IsQQ(a.Qq))return alert("QQ\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e"),!1;if(!CheckInput.IsEmpty(a.Constant)&&a.Content.length>Constant.INPUT_SYS_MESAGE_CONTENT_MAX)return alert("\u7559\u8a00\u5185\u5bb9\u4e0d\u80fd\u5927\u4e8e"+Constant.INPUT_SYS_MESAGE_CONTENT_MAX+"\u4e2a\u5b57"),!1;b&&OpenLoadingDialog();$.ajax({url:getActionPath("MessageCreate","Store"),dataType:"json",contentType:"application/json",type:"POST",data:stringify({message:a}),success:function(a){b&&CloseLoadingDialog();
!0==a.success?null!=c&&c():ShowActionError(a.error,"buyer")},error:function(a,b,c){ShowAjaxError(a,b,c)}})}try{a.show_mode==PluginConstant.SHOW_MODE_STATIC?a.body.find("#message_add").click(function(){var c={};c.Contacts=$.trim(a.body.find("#contacts").val());c.Phone=$.trim(a.body.find("#phone").val());c.Qq=$.trim(a.body.find("#qq").val());c.Content=$.trim(a.body.find("#content").val());b(c,!0,function(){alert("\u60a8\u5df2\u7ecf\u7559\u8a00\u6210\u529f,\u611f\u8c22\u60a8\u7684\u652f\u6301!");a.body.find("#contacts").val("");
a.body.find("#phone").val("");a.body.find("#qq").val("");a.body.find("#content").val("")})}):(a.body.empty(),show_title(a),$("#plugin_message_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(c){}size_message(a)}function size_message(a){var b=set_plugin_boder_size(a).width;a.body.find(".plugin_message_Input").width(b-67)}
function show_coupon(a){function b(b,c,l,n){if(CheckInput.IsEmpty(c))return alert("\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"),!1;if(CheckInput.IsEmpty(b))return alert("\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u8f93\u5165\u4f18\u60e0\u5238\u53f7\u7801"),!1;if(b.length>Constant.INPUT_ZCLOUD_COUPON_MAX)return alert("\u4f18\u60e0\u5238\u53f7\u7801\u4e0d\u80fd\u5927\u4e8e"+Constant.INPUT_ZCLOUD_COUPON_MAX+"\u4e2a\u5b57\u7b26\uff01"),!1;l&&OpenLoadingDialog();$.ajax({url:getActionPath("iKuCouponSearch",
"AccountOperation"),dataType:"json",contentType:"application/json",type:"POST",data:stringify({password:b,checkcode:c}),success:function(b){l&&CloseLoadingDialog();!0==b.success?null!=n&&n(b):ShowActionError(b.error,"buyer");a.body.find("#coupon_number").val("");a.body.find("#coupon_CheckCode").val("");change_checkcode(a.body.find("#CodeImg"))},error:function(a,b,c){ShowAjaxError(a,b,c)}})}try{a.show_mode==PluginConstant.SHOW_MODE_STATIC?(a.body.find("#coupon_search").click(function(){var c=$.trim(a.body.find("#coupon_number").val()),
k=$.trim(a.body.find("#coupon_CheckCode").val());b(c,k,!0,function(a){"PrepaidCard"==a.type&&alert("\u60a8\u7684\u8d2d\u7269\u5361\u53ef\u7528\u4f59\u989d\u4e3a : [ "+(a.iKuCoupon/100).toFixed(2)+" ] \u5143");"DiscountCard"==a.type&&alert("\u60a8\u7684\u6298\u6263\u5361\u53ef\u4eab\u53d7\u6298\u6263\u4e3a : [ "+(a.iKuCoupon/1E3).toFixed(3)+" ] \u6298")})}),a.body.find("#CodeImg").click(function(){change_checkcode($(this))})):(a.body.empty(),show_title(a),$("#plugin_coupon_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(c){}size_coupon(a)}
function size_coupon(a){var b=set_plugin_boder_size(a).width;250<=b?(a.body.find(".small_show").hide(),a.body.find(".big_show").show(),a.body.find(".plugin_coupon_Input").width(b-87),a.body.find("#coupon_CheckCode").width(b-180)):(a.body.find(".big_show").hide(),a.body.find(".small_show").show(),a.body.find(".plugin_coupon_Input").width(b-2),a.body.find("#coupon_CheckCode").width(b-95))}
function show_store_logon(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#plugin_store_logon_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(b){}size_store_logon(a)}function size_store_logon(a){set_plugin_boder_size(a)}
function show_sub_store(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#plugin_sub_store_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content"))),a.show_mode!=PluginConstant.SHOW_MODE_EDIT&&(a.body.find("#seller_sub_service_ctrl").hover(function(){a.body.find("#seller_sub_service").show()},function(){a.body.find("#seller_sub_service").show()}),a.body.find("#seller_sub_service").hover(function(){},function(){a.body.find("#seller_sub_service").hide()}))}catch(b){}size_sub_store(a)}
function size_sub_store(a){set_plugin_boder_size(a)}function show_sub_store_list(a){try{a.show_mode!=PluginConstant.SHOW_MODE_STATIC&&(a.body.empty(),show_title(a),$("#plugin_sub_store_list_tmpl").tmpl(a).appendTo(a.body.find(".plugin_inner_content")))}catch(b){}size_sub_store_list(a)}
function size_sub_store_list(a){var b=set_plugin_boder_size(a).height,c=a.body.find(".plugin_sub_store_list_box li").height(),b=Math.floor(b/c);a.body.find(".plugin_sub_store_list_box").height(c*b);!0==a.data.Roll&&a.body.find(".plugin_sub_store_list_box").carouFredSel({items:b,auto:Number(a.data.Interval),scroll:{items:1,pauseOnHover:!0},direction:a.data.Direction==Constant.PLUGIN_CAROUSEL_DIR_UP?"up":"down"})};var iStoreStatic=function(a,b,c){this.istore_option=a;this.plugin_option=b;this.plugins=[];this.frame=$(c)};
iStoreStatic.prototype={show_store_display:function(){var a=this;this.frame.find(".plugin_containers").each(function(){var b=Number($(this).attr("plugin_type")),c=Number($(this).attr("layout_id")),g=Number($(this).attr("x")),k=Number($(this).attr("y")),l=Number($(this).attr("cx")),n=Number($(this).attr("cy")),d={};d.ShowTitle=Number($(this).attr("plugin_data_show_title"));d.Style=Number($(this).attr("plugin_data_style"));d.Type=Number($(this).attr("plugin_data_type"));switch(b){case Constant.PLUGIN_TYPE_ADVERTISING:var h=
$(this).find(".plugin_advertising_content");d.Interval=h.attr("Interval");d.Direction=h.attr("Direction");break;case Constant.PLUGIN_TYPE_CAROUSEL:h=$(this).find(".plugin_carousel_content");d.Setting={};d.Setting.ShowNumber=h.attr("ShowNumber");d.Setting.Interval=h.attr("Interval");d.Setting.Direction=h.attr("Direction");d.Setting.Gap=h.attr("Gap");d.Setting.ShowText=h.attr("ShowText");break;case Constant.PLUGIN_TYPE_NEWS_TEXT:case Constant.PLUGIN_TYPE_NEWS_GRAPHIC:h=$(this).find(".plugin_news_main_content");
d.Roll="True"==h.attr("Roll")||"true"==h.attr("Roll");d.Interval=h.attr("Interval");d.Direction=h.attr("Direction");break;case Constant.PLUGIN_TYPE_SHOWCASE1:case Constant.PLUGIN_TYPE_SHOWCASE2:case Constant.PLUGIN_TYPE_SHOWCASE3:h=$(this).find(".showcase_main_content");d.GoodsStyle=h.attr("goods_style");d.Roll="True"==h.attr("Roll")||"true"==h.attr("Roll");d.Interval=h.attr("Interval");d.Direction=h.attr("Direction");break;case Constant.PLUGIN_TYPE_SUB_STORE_LIST:h=$(this).find(".plugin_sub_store_list_box"),
d.Roll="True"==h.attr("Roll")||"true"==h.attr("Roll"),d.Interval=h.attr("Interval"),d.Direction=h.attr("Direction")}a.add_plugin_layout(c,b,g,k,l,n,d)})},add_plugin_layout:function(a,b,c,g,k,l,n){var d=this.add_plugin(b);d.plugin_id=-1;d.layout_id=a;d.grid_x=c;d.grid_y=g;d.grid_cx=k;d.grid_cy=l;d.data=n;d.is_new=!1;d.frame.remove();d.frame=this.frame.find(".plugin_containers[layout_id="+a+"]");d.body=d.frame.find(".plugin_body");d.plugin_type!=Constant.PLUGIN_TYPE_NAV_ALL&&d.plugin_type!=Constant.PLUGIN_TYPE_NAV_SELLERSUB_ALL||
d.get_body().css("z-index",10);this.plugins.push(d);d.show_normal();d.show();setTimeout(function(){d.show_data()},0)},add_plugin:function(a){for(var b=this,c=null,g=0;g<this.plugin_option.length;g++)if(this.plugin_option[g].plugin_type==a){c=$.extend(!0,{store_info:this.istore_option.store_info,action_path:this.istore_option.action_path},this.plugin_option[g]);break}null==c&&(c={plugin_type:a,content:"<div></div>",icon:"<div></div>",tools_bar:$("<div></div>"),on_show:null,on_sized:null});a=$.extend(!0,
{},c,{plugin_type:a,show_mode:PluginConstant.SHOW_MODE_STATIC,frame_config:this.istore_option.frame_config,icon:"<div></div>",content:$("<div></div>"),tools_bar:$("<div></div>"),tools_show_resize:!1,page_id:this.istore_option.page_id,containers:this.store_containers,on_remove:function(a){b.on_remove(a)}});return new iStorePlugin(a)},on_remove:function(a){},on_moved:function(a,b,c){},on_sized:function(a,b,c){}};
